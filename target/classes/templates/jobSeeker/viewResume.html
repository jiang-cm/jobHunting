<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>个人简历</title>
    <style>
        .layui-row h1 {color:#009688;font-size:25px;font-weight:bold;text-align: center;line-height: 100px;}
        .layui-row h2 {color: #66615f}
        .layui-container {overflow: auto}
    </style>
    <link rel="stylesheet" th:href="@{/layui/css/layui.css}">
</head>

<body>
<div class="layui-container">
    <div class="layui-row" style="height: 100px">
        <h1>个人简历</h1>
    </div>
    <div class="layui-row" style="height: 50px;">
        <h2>个人信息</h2>
    </div>
    <form class="layui-form" id="addForm" th:action="@{/updateReume}" method="post">
        <div class="layui-form-item">
            <label class="layui-form-label">姓名  <strong style="color: red">*</strong></label>
            <div class="layui-input-block">
                <input type="text" name="fullName" th:value="${resume.fullName}" id="reName" required autocomplete="off" placeholder="请输入您的真实姓名" class="layui-input">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">性别  <strong sztyle="color: red">*</strong></label>
            <div class="layui-inline">
                <div class="layui-input-inline">
                    <input type="radio" name="reSex" value="男" title="男" th:checked="${resume.reSex}">
                    <input type="radio" name="reSex" value="女" title="女" th:checked="${resume.reSex}">
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">生日  <strong style="color: red">*</strong></label>
                <div class="layui-input-inline">
                    <input type="text" name="reBirth" th:value="${resume.reBirth}" required id="date1" lay-verify="date" placeholder="yyyy-MM-dd" autocomplete="off" class="layui-input">
                </div>
            </div>
        </div>
        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label" style="width: auto;">当前求职状态  <strong style="color: red">*</strong></label>
                <div class="layui-input-inline">
                    <select name="jhStatus" id="jhStatus" required>
                        <option value="">请选择</option>
                        <option value="离职-随时到岗" th:selected="${resume.jhStatus}">离职-随时到岗</option>
                        <option value="离职-随时到岗" th:selected="${resume.jhStatus}">在职-月内到岗</option>

                    </select>
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label" style="width: auto;">开始工作时间  <strong style="color: red">*</strong></label>
                <div class="layui-input-inline">
                    <input type="text" required name="startWorkTime" th:value="${resume.startWorkTime}" id="date2" lay-verify="date" placeholder="yyyy-MM-dd" autocomplete="off" class="layui-input">
                </div>
            </div>
        </div>
        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">电话  <strong style="color: red">*</strong></label>
                <div class="layui-input-inline">
                    <input name="rsPhone" id="phone" th:value="${resume.rsPhone}" type="text" required lay-verify="required" placeholder="请输入您的手机号码" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">邮箱  <strong style="color: red">*</strong></label>
                <div class="layui-input-inline">
                    <input type="text" name="rsMalis" id="mails" th:value="${resume.rsMalis}" required lay-verify="required" placeholder="请输入您的邮箱" autocomplete="off" class="layui-input">

                </div>
            </div>
        </div>
        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">期望职位  <strong style="color: red">*</strong></label>
                <div class="layui-input-inline">
                    <input type="text" name="desiredPosition" id="desiredPosition" th:value="${resume.desiredPosition}" required lay-verify="required" placeholder="例如：UI设计师" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">薪资要求  <strong style="color: red">*</strong></label>
                <div class="layui-input-inline">
                    <input type="text" name="salaryExpectation" id="salaryExpectation" th:value="${resume.salaryExpectation}" required lay-verify="required" placeholder="例如：1k-3k" autocomplete="off" class="layui-input">
                </div>
            </div>
        </div>
        <div class="layui-row" style="height: 50px;">
            <h2>工作经历</h2>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">公司名称</label>
            <div class="layui-inline">
                <div class="layui-input-inline">
                    <input type="text" name="cName" th:value="${resume.cName}" autocomplete="off" placeholder="请输入公司名" class="layui-input">
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">在职时间</label>
                <div class="layui-input-inline">
                    <input type="text" name="sInServiceTime" th:value="${resume.sInServiceTime}" id="date3" placeholder="yyyy-MM-dd" autocomplete="off" class="layui-input">
                </div>
                <div class="layui-input-inline" style="width: auto;line-height: 38px">
                    至
                </div>
                <div class="layui-input-inline">
                    <input type="text" name="eInServiceTime" th:value="${resume.eInServiceTime}" id="date4" placeholder="yyyy-MM-dd" autocomplete="off" class="layui-input">
                </div>
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">职位类型</label>
            <div class="layui-input-block">
                <input type="text" name="jType" th:value="${resume.jType}"  autocomplete="off" placeholder="例如：java" class="layui-input">
            </div>
        </div>
        <div class="layui-form-item layui-form-text">
            <label class="layui-form-label">工作</label>
            <div class="layui-input-block">
                <textarea placeholder="请输入内容" name="jobContent" th:text="${resume.jobContent}" class="layui-textarea"></textarea>
            </div>
        </div>
        <div class="layui-row" style="height: 50px;">
            <h2>教育经历</h2>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">学校名称  <strong style="color: red">*</strong></label>
            <div class="layui-input-block">
                <input type="text" name="schoolName" id="schoolName" th:value="${resume.schoolName}" required autocomplete="off" placeholder="例如：北京大学" class="layui-input">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">学历  <strong style="color: red">*</strong></label>
            <div class="layui-inline">
                <div class="layui-input-inline">
                    <select name="reEducation" id="reEducation" lay-verify="required">
                        <option value=""></option>
                        <option value="初中及以下" th:selected="${resume.reEducation}">初中及以下</option>
                        <option value="中专/中技" th:selected="${resume.reEducation}">中专/中技</option>
                        <option value="高中" th:selected="${resume.reEducation}">高中</option>
                        <option value="大专" th:selected="${resume.reEducation}">大专</option>
                        <option value="本科" th:selected="${resume.reEducation}">本科</option>
                    </select>
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">专业  <strong style="color: red">*</strong></label>
                <div class="layui-input-inline">
                    <input type="text" name="reMajor" th:value="${resume.reMajor}" id="reMajor" required placeholder="例如：计算机科学与技术" autocomplete="off" class="layui-input">
                </div>
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">时间段  <strong style="color: red">*</strong></label>
            <div class="layui-inline">
                <div class="layui-input-inline">
                    <input type="text" name="sSchoolHours" th:value="${resume.sSchoolHours}" id="date5" required lay-verify="date" placeholder="选择年份" autocomplete="off" class="layui-input">
                </div>
                <div class="layui-input-inline" style="width: auto;line-height: 38px">
                    至
                </div>
                <div class="layui-input-inline">
                    <input type="text" name="eSchoolHours" th:value="${resume.eSchoolHours}" id="date6" required lay-verify="date" placeholder="选择年份" autocomplete="off" class="layui-input">
                </div>
            </div>
        </div>
        <div class="layui-row" style="height: 50px;">
            <h2>兴趣爱好(必填)</h2>
        </div>
        <div class="layui-form-item layui-form-text">
            <div class="layui-input-block">
                <textarea placeholder="如：看书等" class="layui-textarea" th:text="${resume.reHobbies}" name="reHobbies" id="reHobbies" required></textarea>
            </div>
        </div>
        <div class="layui-row" style="height: 50px;">
            <h2>自我评价(必填)</h2>
        </div>
        <div class="layui-form-item layui-form-text">
            <div class="layui-input-block">
                <textarea placeholder="请输入自我评价" th:text="${resume.selfEvaluation}" class="layui-textarea" name="selfEvaluation" id="selfEvaluation" required></textarea>
            </div>
        </div>
        <input name="reID" hidden class="form-control" th:value="${resume.reID}">
    </form>
    <div class="layui-form-item" style="text-align: center">
        <div class="layui-input-block">
            <button type="submit" class="layui-btn" lay-filter="demo1" id="sub">修改</button>
        </div>
    </div>
</div>

<script th:src="@{/js/jquery-3.4.1.min.js}" charset="utf-8"></script>
<script th:src="@{/layui/layui.js}" charset="utf-8"></script>
<script>
    layui.use(['form', 'layedit', 'laydate'], function() {
        var form = layui.form
            , layer = layui.layer
            , layedit = layui.layedit
            , laydate = layui.laydate;

        //日期
        laydate.render({
            elem: '#date1'
        });
        laydate.render({
            elem: '#date2'
        });
        laydate.render({
            elem: '#date3'
        });
        laydate.render({
            elem: '#date4'
        });
        laydate.render({
            elem: '#date5'
        });
        laydate.render({
            elem: '#date6'
        });
    });

    $("#sub").click(function(){
        var reName=(document.getElementById("reName")).value;
        var jhStatus=(document.getElementById("jhStatus")).value;
        var desiredPosition=(document.getElementById("desiredPosition")).value;
        var salaryExpectation=(document.getElementById("salaryExpectation")).value;
        var schoolName=(document.getElementById("schoolName")).value;
        var reEducation=(document.getElementById("reEducation")).value;
        var reMajor=(document.getElementById("reMajor")).value;
        var reHobbies=(document.getElementById("reHobbies")).value;
        var selfEvaluation=(document.getElementById("selfEvaluation")).value;
        var phone=(document.getElementById("phone")).value;
        var date1=(document.getElementById("date1")).value;
        var date2=(document.getElementById("date2")).value;
        var date3=(document.getElementById("date3")).value;
        var date4=(document.getElementById("date4")).value;
        var date5=(document.getElementById("date5")).value;
        var date6=(document.getElementById("date6")).value;
        var mails=(document.getElementById("mails")).value;
        if(reName=="" || jhStatus=="" || desiredPosition=="" || salaryExpectation=="" || schoolName=="" || reEducation=="" || reMajor=="" || reHobbies=="" || selfEvaluation=="" || phone=="" || date1=="" || date2=="" || mails=="" || date5=="" || date6=="" ){
            alert("必填字段不能为空");
            return;
        }else{
            if(!/^1[34578]\d{9}$/.test(phone)){
                alert("请输入正确的手机号！");
                return;
            }
            if(!/^\w+@[a-zA-Z0-9]{2,10}(?:\.[a-z]{2,4}){1,3}$/.test(mails)){
                alert("请输入正确的邮箱！");
                return;
            }
            var d3=new Date(date3);
            var d4=new Date(date4);
            var d5=new Date(date5);
            var d6=new Date(date6);
            if(d3.getTime()>d4.getTime()){
                alert("请输入正确的在职时间！");
                return;
            }
            if (d5.getTime() > d6.getTime()) {
                alert("教育经历时间段错误！");
                return;
            }
            var targetUrl = $("#addForm").attr("action");
            var data = $("#addForm").serialize();
            $.ajax({
                type:'post',
                url:targetUrl,
                cache: false,
                data:data,  //重点必须为一个变量如：data
                dataType:'text',
                success:function(data){
                    if (data.toString()=='OK'){
                        layer.msg("修改成功！");
                    }else{
                        layer.msg("修改失败！");
                    }
                },error : function() {
                    alert("异常！");
                }

            })
        }
    });
</script>

</body>
</html>